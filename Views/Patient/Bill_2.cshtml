@model HMSApp.Controllers.PatientController.BillDisplayViewModel
@{
    ViewData["Title"] = "On-Spot Bill";
    Layout = "_Layout";
}
<link rel="stylesheet" href="~/css/bill.css" asp-append-version="true" />
<div class="bill-wrapper">
  <div class="bill-paper">
    <div class="bill-header" style="background:linear-gradient(120deg,#059669,#0d9488)">
      <div>
        <h2 class="mb-0"><i class="bi bi-receipt me-2"></i>On-Spot Payment Receipt</h2>
        <small>Generated during visit</small>
      </div>
      <div class="text-end meta">
        <small><strong>Bill #:</strong> @Model.Bill.BillId</small>
        <small><strong>Date:</strong> @Model.Bill.BillDate.ToLocalTime().ToString("dd MMM yyyy HH:mm")</small>
        <small><strong>Status:</strong> <span class="badge-status @(Model.Bill.PaymentStatus=="Paid"?"badge-paid":"badge-unpaid")">@Model.Bill.PaymentStatus</span></small>
      </div>
    </div>
    <div class="section">
      <h5>Patient Details</h5>
      <div class="row g-3 small">
        <div class="col-md-6">
          <strong>Name:</strong> @Model.Patient.Name<br />
          <strong>Gender:</strong> @Model.Patient.Gender<br />
          <strong>DOB:</strong> @Model.Patient.DateOfBirth.ToString("dd MMM yyyy")<br />
        </div>
        <div class="col-md-6">
          <strong>Contact:</strong> @(Model.Patient.ContactNumber ?? "-")<br />
          <strong>Address:</strong> @(Model.Patient.Address ?? "-")<br />
        </div>
      </div>
    </div>
    <div class="section">
      <h5>Charges</h5>
      <table class="table-summary">
        <thead><tr><th>Description</th><th style="width:140px;text-align:right">Amount (Rs.)</th></tr></thead>
        <tbody>
          <tr><td>Consultation / Treatment</td><td style="text-align:right">@Model.Bill.TotalAmount.ToString("0.00")</td></tr>
        </tbody>
      </table>
      <div class="total-box">
        <div><strong>Total:</strong> Rs. @Model.Bill.TotalAmount.ToString("0.00")</div>
        <div><strong>Payment Method:</strong> @(Model.Bill.Prescription!=null && Model.Bill.Prescription.Contains("[OFFLINE PAYMENT]") ? "Cash" : "Online / UPI")</div>
        <div><strong>Status:</strong> <span class="badge-status @(Model.Bill.PaymentStatus=="Paid"?"badge-paid":"badge-unpaid")">@Model.Bill.PaymentStatus</span></div>
      </div>
    </div>
    <div class="section">
      <h5>Notes / Prescription</h5>
      <div class="prescription-box">@(string.IsNullOrWhiteSpace(Model.Bill.Prescription) ? "No notes." : Model.Bill.Prescription.Replace("[ON-SPOT]",""))</div>
    </div>
    <div class="section small text-muted">On-spot payment successfully recorded.</div>
    <div class="actions">
      <a asp-action="Dashboard" class="btn btn-primary"><i class="bi bi-speedometer2"></i> Dashboard</a>
    </div>
  </div>
</div>